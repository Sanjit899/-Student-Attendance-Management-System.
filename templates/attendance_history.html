{% extends 'base.html' %}
{% block title %}Attendance History{% endblock %}
{% block content %}
<h4>Attendance History</h4>
<form method="get" class="row g-2 mb-3">
  <div class="col-md-3"><input type="date" name="date_from" class="form-control" value="{{ date_from }}"></div>
  <div class="col-md-3"><input type="date" name="date_to" class="form-control" value="{{ date_to }}"></div>
  <div class="col-md-3">
    <select name="class_id" class="form-control">
      <option value="">All Classes</option>
      {% for c in classes %}
        <option value="{{ c._id }}" {% if selected_class and selected_class==c._id %}selected{% endif %}>{{ c.name }}</option>
      {% endfor %}
    </select>
  </div>
  <div class="col-md-2"><button class="btn btn-primary">Filter</button></div>
</form>

<table class="table">
  <thead><tr><th>Date</th><th>Class</th><th>Student</th><th>Status</th></tr></thead>
  <tbody>
    {% for r in results %}
      <tr><td>{{ r.date }}</td><td>{{ r.class_name }}</td><td>{{ r.student_name }}</td><td>{{ r.status }}</td></tr>
    {% else %}
      <tr><td colspan="4">No records</td></tr>
    {% endfor %}
  </tbody>
</table>
{% endblock %}
